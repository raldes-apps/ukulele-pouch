<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ukulele Pouch</title>
    <meta name="robots" content="index, follow" />
    <script>
      (function () {
        try {
          function getRootPath() {
            var path = location.pathname;
            if (/\/(cs|en)\/index\.html$/.test(path)) {
              return path.replace(/(cs|en)\/index\.html$/, "");
            }
            if (/\/(cs|en)\/$/.test(path)) {
              return path.replace(/(cs|en)\/$/, "");
            }
            if (path.endsWith("/index.html")) {
              return path.replace(/index\.html$/, "");
            }
            if (path.endsWith("/")) {
              return path;
            }
            return path.replace(/[^/]+$/, "");
          }

          var stored = localStorage.getItem("ukuleleLang");
          var lang = (stored === "cs" || stored === "en") ? stored : null;
          if (!lang) {
            var preferred = (navigator.languages && navigator.languages[0]) || navigator.language || "en";
            preferred = preferred.toLowerCase();
            lang = (preferred.startsWith("cs") || preferred.startsWith("sk")) ? "cs" : "en";
          }
          var rootPath = getRootPath();
          var target = location.protocol === "file:"
            ? rootPath + lang + "/index.html"
            : rootPath + lang + "/";
          if (location.pathname !== target) {
            location.replace(target);
          }
        } catch (e) {
          if (location.protocol === "file:") {
            location.replace("./en/index.html");
          } else {
            location.replace("/ukulele-pouch/en/");
          }
        }
      })();
    </script>
  </head>
  <body>
    <p>Redirecting...</p>
  </body>
</html>
